{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// Email validation with typo check\nconst COMMON_EMAIL_TYPOS=['gmal.com','gmial.com','gmaill.com','gmail.con','gmail.co','gmail.cmo','yaho.com','yahoo.con','yahoo.cmo','hotmial.com','hotmil.com','hotmail.con','hotmail.cmo','outlok.com','outlook.con','outlook.cmo','icloud.con','icloud.cmo','google.con','google.cmo'];function isValidEmail(email){var _email$split$;// Basic email regex\nconst emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/;if(!emailRegex.test(email))return'Invalid email format.';const domain=((_email$split$=email.split('@')[1])===null||_email$split$===void 0?void 0:_email$split$.toLowerCase())||'';for(const typo of COMMON_EMAIL_TYPOS){if(domain.endsWith(typo)){return`Did you mean ${domain.replace(typo,typo.replace('con','com'))}?`;}}return null;}// US phone validation (accepts (xxx) xxx-xxxx, xxx-xxx-xxxx, xxxxxxxxxx, +1xxxxxxxxxx)\nfunction isValidUSPhone(phone){// Remove non-digits\nconst digits=phone.replace(/\\D/g,'');if(digits.length===11&&digits.startsWith('1')){// Remove leading 1\nphone=digits.slice(1);}else if(digits.length===10){phone=digits;}else{return'Phone must be a valid US number (10 digits).';}// Area code cannot start with 0 or 1\nif(/^[01]/.test(phone))return'Area code cannot start with 0 or 1.';return null;}// Date of birth validation (must be 18+ years old)\nfunction isValidDateOfBirth(dateOfBirth){if(!dateOfBirth)return'Date of birth is required.';const birthDate=new Date(dateOfBirth);const today=new Date();let age=today.getFullYear()-birthDate.getFullYear();const monthDiff=today.getMonth()-birthDate.getMonth();if(monthDiff<0||monthDiff===0&&today.getDate()<birthDate.getDate()){age--;}if(age<18)return'You must be at least 18 years old to register.';if(age>100)return'Please enter a valid date of birth.';return null;}export default function ProfileCompletionModal(_ref){let{isOpen,onComplete,onCancel,clerkUser}=_ref;const[profileData,setProfileData]=useState({firstName:'',lastName:'',email:'',phone:'',dateOfBirth:'',gender:'',termsAccepted:false,communicationsAccepted:false});const[fieldErrors,setFieldErrors]=useState({});// Pre-populate fields with Clerk user data\nuseEffect(()=>{if(clerkUser&&isOpen){setProfileData(prev=>{var _clerkUser$primaryEma;return{...prev,firstName:clerkUser.firstName||'',lastName:clerkUser.lastName||'',email:((_clerkUser$primaryEma=clerkUser.primaryEmailAddress)===null||_clerkUser$primaryEma===void 0?void 0:_clerkUser$primaryEma.emailAddress)||''};});}},[clerkUser,isOpen]);if(!isOpen)return null;const handleInput=e=>{const{name,value,type}=e.target;const checked=e.target.checked;setFieldErrors({});setProfileData(prev=>({...prev,[name]:type==='checkbox'?checked:value}));};const validateForm=()=>{const errors={};if(!profileData.firstName)errors.firstName='First name is required.';if(!profileData.lastName)errors.lastName='Last name is required.';const emailError=isValidEmail(profileData.email);if(!profileData.email)errors.email='Email is required.';else if(emailError)errors.email=emailError;const phoneError=isValidUSPhone(profileData.phone);if(!profileData.phone)errors.phone='Phone is required.';else if(phoneError)errors.phone=phoneError;const dobError=isValidDateOfBirth(profileData.dateOfBirth);if(!profileData.dateOfBirth)errors.dateOfBirth='Date of birth is required.';else if(dobError)errors.dateOfBirth=dobError;if(!profileData.gender)errors.gender='Gender is required.';if(!profileData.termsAccepted)errors.termsAccepted='You must accept the terms of service.';return errors;};const handleSubmit=e=>{e.preventDefault();const errors=validateForm();if(Object.keys(errors).length>0){setFieldErrors(errors);return;}onComplete(profileData);};// Check if form is valid for submit button\nconst isFormValid=()=>{return profileData.firstName&&profileData.lastName&&profileData.email&&profileData.phone&&profileData.dateOfBirth&&profileData.gender&&profileData.termsAccepted&&!isValidEmail(profileData.email)&&!isValidUSPhone(profileData.phone)&&!isValidDateOfBirth(profileData.dateOfBirth);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gunmetal border-2 border-pumpkin rounded-xl shadow-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto relative\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-pumpkin mb-4 text-center\",children:\"Complete Your Profile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 text-sm mb-6 text-center\",children:\"Please provide your personal information to continue using the league platform.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-400 text-sm mb-6 text-center\",children:\"\\u26A0\\uFE0F This information is required to create your account. If you cancel, your session will be removed.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{className:`w-full p-2 rounded bg-black border border-pumpkin text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pumpkin ${fieldErrors.firstName?'border-red-500':''}`,name:\"firstName\",placeholder:\"First Name\",value:profileData.firstName,onChange:handleInput,autoComplete:\"given-name\"}),/*#__PURE__*/_jsx(\"input\",{className:`w-full p-2 rounded bg-black border border-pumpkin text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pumpkin ${fieldErrors.lastName?'border-red-500':''}`,name:\"lastName\",placeholder:\"Last Name\",value:profileData.lastName,onChange:handleInput,autoComplete:\"family-name\"})]}),fieldErrors.firstName&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-400 text-xs\",children:fieldErrors.firstName}),fieldErrors.lastName&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-400 text-xs\",children:fieldErrors.lastName}),/*#__PURE__*/_jsx(\"input\",{className:`w-full p-2 rounded bg-black border border-pumpkin text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pumpkin ${fieldErrors.email?'border-red-500':''}`,name:\"email\",placeholder:\"Email\",value:profileData.email,onChange:handleInput,autoComplete:\"email\",type:\"email\"}),fieldErrors.email&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-400 text-xs\",children:fieldErrors.email}),/*#__PURE__*/_jsx(\"input\",{className:`w-full p-2 rounded bg-black border border-pumpkin text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pumpkin ${fieldErrors.phone?'border-red-500':''}`,name:\"phone\",placeholder:\"Phone\",value:profileData.phone,onChange:handleInput,autoComplete:\"tel\",type:\"tel\"}),fieldErrors.phone&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-400 text-xs\",children:fieldErrors.phone}),/*#__PURE__*/_jsx(\"input\",{className:`w-full p-2 rounded bg-black border border-pumpkin text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pumpkin ${fieldErrors.dateOfBirth?'border-red-500':''}`,name:\"dateOfBirth\",placeholder:\"Date of Birth\",value:profileData.dateOfBirth,onChange:handleInput,autoComplete:\"bday\",type:\"date\"}),fieldErrors.dateOfBirth&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-400 text-xs\",children:fieldErrors.dateOfBirth}),/*#__PURE__*/_jsxs(\"select\",{className:`w-full p-2 rounded bg-black border border-pumpkin text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pumpkin ${fieldErrors.gender?'border-red-500':''}`,name:\"gender\",value:profileData.gender,onChange:handleInput,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Gender\"}),/*#__PURE__*/_jsx(\"option\",{value:\"male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"female\",children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"}),/*#__PURE__*/_jsx(\"option\",{value:\"prefer-not-to-say\",children:\"Prefer not to say\"})]}),fieldErrors.gender&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-400 text-xs\",children:fieldErrors.gender}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 pt-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-start gap-3 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"termsAccepted\",checked:profileData.termsAccepted,onChange:handleInput,className:\"mt-1 w-4 h-4 text-pumpkin bg-black border-pumpkin rounded focus:ring-pumpkin focus:ring-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-300\",children:[\"I agree to the \",/*#__PURE__*/_jsx(\"a\",{href:\"/terms\",className:\"text-pumpkin hover:text-deeporange underline\",children:\"Terms of Service\"}),\" and acknowledge that by creating an account and providing my information, I am bound by these terms.\"]})]}),fieldErrors.termsAccepted&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-400 text-xs\",children:fieldErrors.termsAccepted}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-start gap-3 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"communicationsAccepted\",checked:profileData.communicationsAccepted,onChange:handleInput,className:\"mt-1 w-4 h-4 text-pumpkin bg-black border-pumpkin rounded focus:ring-pumpkin focus:ring-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-300\",children:\"I consent to receive communications about league activities, schedules, and updates via email.\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!isFormValid(),className:`w-full py-3 rounded font-bold transition-colors mt-4 ${isFormValid()?'bg-pumpkin text-black hover:bg-deeporange':'bg-gray-600 text-gray-400 cursor-not-allowed'}`,children:\"Complete Profile\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,className:\"w-full py-2 rounded font-bold border-2 border-red-500 text-red-500 hover:bg-red-500 hover:text-white transition-colors mt-2\",children:\"Cancel & Remove Session\"})]})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}